{% extends 'layout.html.twig' %}

{% block title %}Déposer une annonce{% endblock %}

{% block body %}
    <div class="homeSection">
        <div class="row justify-content-center p-3 w-100 m-0">
            <div class="col col-md-4 offset-md-4 loginBlock m-2 p-3">
                <h2 class="loginTitle mb-3 text-center">Déposer une annonce</h2>
                {{ form_start(form) }}
                {{ form_widget(form) }}
                <button class="btn btn-success btn-block my-3">{{ button_label|default('Valider') }}</button>
                {{ form_end(form) }}
                <button onclick="confirmAbandonment()" class="btn btn-outline-danger btn-block">Abandonner</button>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        function confirmAbandonment() {
            swal({
                title: "Êtes vous sûr(e)?",
                text: "Veuillez confirmer l'abandon",
                icon: "warning",
                buttons: ["Annuler", "Abandonner l'ajout"],
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        window.history.back();
                        swal("Annonce non ajoutée", {
                            icon: "success",
                        });
                    } else {
                        swal("Vous pouvez poursuivre l'ajout");
                    }
                });
        }
    </script>
{% endblock %}
